# ğŸ”§ Ø®Ø·ÙˆØ§Øª Ø±Ø¨Ø· D1 ÙŠØ¯ÙˆÙŠØ§Ù‹ ÙÙŠ Cloudflare (Ù…Ø·Ù„ÙˆØ¨!)

## âš ï¸ Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹ - ÙŠØ¬Ø¨ ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ§Øª!

Ø¹Ù„Ù‰ Ø§Ù„Ø±ØºÙ… Ù…Ù† Ø£Ù† `wrangler.toml` Ù…Ø­Ø¯Ù‘Ø« Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ØŒ **Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø¨Ø· ÙŠØ¯ÙˆÙŠØ§Ù‹** ÙÙŠ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Cloudflare.

---

## ğŸ“‹ Ø§Ù„Ø®Ø·ÙˆØ§Øª (5 Ø¯Ù‚Ø§Ø¦Ù‚ ÙÙ‚Ø·):

### 1. Ø§ÙØªØ­ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Cloudflare
```
ğŸ”— https://dash.cloudflare.com/c65441278840d45ed3cd9cfef5b898b1
```

### 2. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Workers & Pages
- Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙŠØ³Ø±Ù‰ØŒ Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ **"Workers & Pages"**
- Ø³ØªØ¬Ø¯ Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¬Ù…ÙŠØ¹ Ù…Ø´Ø§Ø±ÙŠØ¹Ùƒ

### 3. Ø§ÙØªØ­ Ù…Ø´Ø±ÙˆØ¹ report-sys
- Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø³Ù… **"report-sys"**
- Ø§Ù†Ù‚Ø± Ø¹Ù„ÙŠÙ‡ Ù„ÙØªØ­Ù‡

### 4. Ø§ÙØªØ­ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Functions
```
report-sys > Settings > Functions
```
- Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ ØªØ¨ÙˆÙŠØ¨ **"Settings"** (ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰)
- Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©ØŒ Ø§Ø®ØªØ± **"Functions"**

### 5. Ø§Ø¨Ø­Ø« Ø¹Ù† D1 database bindings
- Ù…Ø±Ù‘Ø± Ù„Ù„Ø£Ø³ÙÙ„ Ø­ØªÙ‰ ØªØ¬Ø¯ Ù‚Ø³Ù… **"D1 database bindings"**
- ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø±Ø¨Ø· Ù…ÙˆØ¬ÙˆØ¯

### 6. Ø£Ø¶Ù Ø§Ù„Ø±Ø¨Ø· (Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹)
- Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± **"Add binding"**
- Ø§Ù…Ù„Ø£ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:
  ```
  Variable name: DB
  D1 database:   reportDB
  ```
- Ø§Ù†Ù‚Ø± **"Save"**

### 7. Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ (30 Ø«Ø§Ù†ÙŠØ©)
- Cloudflare ØªØ­ØªØ§Ø¬ ÙˆÙ‚Øª Ù‚ØµÙŠØ± Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
- Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø´Ø±

---

## ğŸ§ª Ø§Ø®ØªØ¨Ø± Ø§Ù„Ø±Ø¨Ø·

### Ø§Ø®ØªØ¨Ø§Ø± 1: Health Endpoint
Ø§ÙØªØ­ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­:
```
https://report-sys.pages.dev/api/health
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**
```json
{
  "status": "ok",
  "database": "D1 connected",
  "environment": "production"
}
```

**Ø¥Ø°Ø§ Ø¸Ù‡Ø± Ø®Ø·Ø£:**
```json
{
  "error": "D1 binding 'DB' not found"
}
```
â†’ Ù…Ø¹Ù†Ø§Ù‡ Ø£Ù† Ø§Ù„Ø±Ø¨Ø· Ù„Ù… ÙŠÙØ¶Ù Ø¨Ø¹Ø¯ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…

### Ø§Ø®ØªØ¨Ø§Ø± 2: Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ±
1. Ø§ÙØªØ­: https://report-sys.pages.dev
2. Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„:
   - Email: `admin@airline.com`
   - Password: `password123`
3. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ "Create New Report"
4. Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ± (ASR, OR, RIR, Ø¥Ù„Ø®)
5. Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
6. Ø§Ø¶ØºØ· "Submit"

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**
- âœ… Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
- âœ… Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙŠØ¸Ù‡Ø± ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
- âœ… Ù„Ø§ Ø£Ø®Ø·Ø§Ø¡ 500

**Ø¥Ø°Ø§ Ø¸Ù‡Ø± Ø®Ø·Ø£ 500:**
â†’ Ø§ÙØªØ­ Console ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ (F12)
â†’ ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
â†’ ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø¨Ø· ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…

---

## ğŸ“¸ ØµÙˆØ± ØªÙˆØ¶ÙŠØ­ÙŠØ© Ù„Ù„Ø®Ø·ÙˆØ§Øª:

### Ù…ÙˆÙ‚Ø¹ D1 bindings ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:
```
Cloudflare Dashboard
  â””â”€â”€ Workers & Pages
      â””â”€â”€ report-sys
          â””â”€â”€ Settings
              â””â”€â”€ Functions
                  â””â”€â”€ D1 database bindings  â† Ù‡Ù†Ø§!
                      â””â”€â”€ [Add binding]
```

### Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø¨Ø·:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Add D1 database binding            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Variable name: [DB            ]    â”‚
â”‚  D1 database:   [reportDB â–¼   ]    â”‚
â”‚                                     â”‚
â”‚         [Cancel]  [Save]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

Ù‚Ø¨Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±ØŒ ØªØ£ÙƒØ¯ Ù…Ù†:

- [x] `wrangler.toml` ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ `binding = "DB"`
- [x] Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª D1 Ù…ÙˆØ¬ÙˆØ¯Ø©: `reportDB`
- [x] Ø§Ù„Ù…Ø®Ø·Ø· Ù…Ø·Ø¨Ù‘Ù‚: `d1-schema.sql`
- [x] Ø§Ù„ÙƒÙˆØ¯ Ù…Ù†Ø´ÙˆØ± Ø¹Ù„Ù‰ Cloudflare Pages
- [ ] **âœ‹ D1 binding Ù…Ø¶Ø§Ù ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…** â† **Ø§ÙØ¹Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¢Ù†!**
- [ ] Ø§Ø®ØªØ¨Ø±Øª endpoint Ø§Ù„ØµØ­Ø©
- [ ] Ø§Ø®ØªØ¨Ø±Øª Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ±

---

## ğŸ†˜ Ø¥Ø°Ø§ ÙˆØ§Ø¬Ù‡Øª Ù…Ø´ÙƒÙ„Ø©

### Ø§Ù„Ø®Ø·Ø£: "D1 binding 'DB' not found"
**Ø§Ù„Ø­Ù„:** Ø£Ø¶Ù Ø§Ù„Ø±Ø¨Ø· ÙŠØ¯ÙˆÙŠØ§Ù‹ ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø£Ø¹Ù„Ø§Ù‡

### Ø§Ù„Ø®Ø·Ø£: "table reports does not exist"
**Ø§Ù„Ø­Ù„:** 
```bash
wrangler d1 execute reportDB --remote --file=./migrations/d1-schema.sql
```

### Ø§Ù„Ø®Ø·Ø£: "Unauthorized"
**Ø§Ù„Ø­Ù„:** ØªØ£ÙƒØ¯ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„:
- admin@airline.com / password123
- Ø£Ùˆ demo@airline.com / password123

---

## ğŸ“ Ø§Ù„Ø®Ù„Ø§ØµØ©

1. **Ø§ÙØªØ­:** https://dash.cloudflare.com
2. **Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰:** Workers & Pages > report-sys > Settings > Functions
3. **Ø£Ø¶Ù:** D1 database binding (Variable: DB, Database: reportDB)
4. **Ø§Ø®ØªØ¨Ø±:** https://report-sys.pages.dev/api/health
5. **Ø£Ù†Ø´Ø¦ ØªÙ‚Ø±ÙŠØ±** Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ¹Ù…Ù„

**ğŸ¯ Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø¨Ø·ØŒ ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ!**

